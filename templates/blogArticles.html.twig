<!DOCTYPE html>
<html lang="en">
    {{ include('header.html.twig') }}
    <body>

        <header class="header">
            <nav>
                {# Include navigation template #}
                {{ include('navigation.html.twig') }}
            </nav>
        </header>
        <main class="main">
            <div class="pageTitle" class="mb-4">
                <h2>Blog Articles for</h2>
                {# Show league name and logo #}
                <h3>  {{ leagueName|e }} <img id='leagueCrest' src="{{ leagueCrest|e('html_attr') }}" alt="{{ leagueName|e }} logo"></h3>
                <p>Browse through the latest articles and updates about the {{ leagueName|e}}.</p>            
            </div>
            {# Buttons for navigation and adding a new post #}
            <div class=" undertilteButtons contaner" mt-5>
                {# Back to home page #}
                <a href="/index.php" class="btn btn-primary mb-3">Back Home</a> 
                {# Link to create a new post for this league #}
                <a href="/createPost.php?league={{leagueCode|e}}" class="btn btn-success mb-3">Add New Post</a>
            </div>
            {# form for blog navigation not visible or league id #}
            <div id="blog-articles-navigation"> 
                <div class="blog-articles-navigation" id="addPostButton">
                    <form action="/blogArticles.php?league={{ leagueCode|e }}" method="get" class="d-inline">
                        <input type="hidden" name="league" value="{{ leagueCode|e }}">
                    </form>
                </div>
            </div>
            <div class ="articleMain">
                {# Check if there are no posts for this league #}
                {% if posts is empty %}
                    <div class= 'empty'>
                        <p>No posts for this league yet.</p>
                    </div>
                {% else %}
                    {# Loop through all posts for selected league #}
                    {% for post in posts %}
                    <a class="link-section-blog" href="/fullArticle.php?articleId={{post.id|e}}">
                        <div class="row g-0 post">
                            <div class = "col sml-6 postContent">
                                {# Post image #}
                                <img class = "articleImage"src="{{post.image_path|e('html_attr') }}" alt="{{post.title|e }}">
                            </div>
                            {# Post title if image is found #}
                            <div class = "col sml-6 postContent">
                                {% if post.image_path %}
                                    <h2>{{ post.title|e }}</h2> 
                                {% endif %}
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                {% endif %}
            </div>
        </main>
        
        <footer class = "footer mt-4">
            <p>Copyright Â© 2025</p>
        </footer>
        {# JavaScript variables passed from Twig #}
        <script>
            window.status = '{{ status|default('')|e('js') }}';
            window.username = '{{ username|default('')|e('js') }}';
            window.context = '{{ context|default('')|e('js') }}';
        </script>
        {# JavaScript file #}
        <script src="js/modal.js"></script>

        {% include 'searchScript.html.twig' %}
    </body>
</html>