<!DOCTYPE html>
<html lang="en">
    {{ include('header.html.twig') }}
    <body>

        <header class="header">
            <nav>
                {# Include navigation template #}
                {{ include('navigation.html.twig') }}
            </nav>
        </header>

        <main class="main">
            <div class="CreatePostForm">
                {# Button to go back to the league blog page #}
                <a href="/blogArticles.php?league={{ leagueCode|e }}" class="btn btn-primary mb-3">Back to {{leagueName|e}} Blog</a>  
                <h1>Create New Post for {{leagueName|e}}</h1>
                {# Form for creating a new post #}
                {# enctype="multipart/form-data" allows image uploads #}
                <form action="/createPost.php" method="POST" enctype="multipart/form-data">
                    {# Post title input #}
                    <div class="mb-3">
                        <label>Title</label>
                        <input type="text" name="title" class="form-control" required>
                    </div>
                    {# Post content textarea #}
                    <div class="mb-3">
                        <label>Content</label>
                        <textarea name="content" id="autoTextarea"  class="form-control" required></textarea>
                    </div>
                    {# image upload #}
                    <div class="mb-3">
                        <label>Image</label>
                        <input type="file" name="image" class="form-control" accept="image/*">
                    </div>
                    {# Hidden field to save which league this post belongs to #}
                    <input type="hidden" name="league" value="{{ leagueCode|e }}">
                    <button type="submit" class="btn btn-success">Save Post</button>
                </form>
            </div>
        </main>

        <footer class="footer mt-4">
            <p>Copyright Â© 2025</p>
        </footer>
        {# Include modal popup template #}
        {% include 'modal.html.twig' %}
        <script>
        // Initialize autosize on the textarea
            autosize(document.getElementById('autoTextarea'));

            // Passing some data from Twig to JavaScript
            window.status = '{{ status|default('')|e('js') }}';
            window.username = '{{ username|default('')|e('js') }}';
            window.context = '{{ context|default('')|e('js') }}';
        </script>
        {#JavaScript for modal functionality #}
        <script src="js/modal.js"></script>

        {% include 'searchScript.html.twig' %}
    </body>
</html>